<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FFMPEG Script Generator</title>
    <style>
        /* General Styling */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 0;
            color: #333;
            background: url('https://www.zollotech.com/wp-content/uploads/2021/12/iOS-16-wallpaper-gradient-wave-by-Hk3ToN-scaled.jpg') no-repeat center center fixed;
            background-size: cover;
            transition: background 0.5s ease-in-out;
        }
        body.offline {
            background: linear-gradient(135deg, #007aff, #5ac8fa, #4cd964, #ff9500, #ff2d55);
        }
        h1, h2 {
            text-align: center;
            color: #555;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .box {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.75); /* Transparency applied */
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
        }
        .dropdown, .input-group {
            margin: 10px 0;
        }
        select, input, button, textarea {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            transition: box-shadow 0.3s;
        }
        select:focus, input:focus, button:focus, textarea:focus {
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.8);
        }
        button {
            background: #007aff;
            color: #fff;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover {
            background: #0056b3;
        }
        textarea {
            height: 150px;
            resize: none;
        }
        .instructions {
            margin-top: 20px;
            font-size: 14px;
            color: #666;
        }
        .toggle-section {
            cursor: pointer;
            font-weight: bold;
            color: #007aff;
            margin-bottom: 10px;
        }
        .toggle-section:hover {
            text-decoration: underline;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>FFMPEG Script Generator</h1>
        <h2>Create Batch Scripts with Advanced Parameters</h2>

        <!-- Video Parameters -->
        <div class="box">
            <div class="toggle-section" onclick="toggleSection('video-settings')">Video Settings ▼</div>
            <div id="video-settings">
                <div class="dropdown">
                    <label for="vcodec">Video Codec:</label>
                    <select id="vcodec">
                        <option value="">None</option>
                        <option value="libx264">H.264 (libx264)</option>
                        <option value="libx265">H.265 (libx265)</option>
                        <option value="mpeg2video">MPEG-2</option>
                        <option value="vp9">VP9</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="vb">Video Bitrate:</label>
                    <input type="text" id="vb" placeholder="e.g., 5000k">
                </div>
                <div class="input-group">
                    <label for="framerate">Frame Rate:</label>
                    <input type="text" id="framerate" placeholder="e.g., 30">
                </div>
                <div class="input-group">
                    <label for="vf">Video Filters:</label>
                    <input type="text" id="vf" placeholder="e.g., scale=1920:1080">
                </div>
                <div class="input-group">
                    <label for="aspect">Aspect Ratio:</label>
                    <input type="text" id="aspect" placeholder="e.g., 16:9">
                </div>
                <div class="input-group">
                    <label for="preset">Preset:</label>
                    <input type="text" id="preset" placeholder="e.g., ultrafast">
                </div>
                <div class="input-group">
                    <label for="profile">Profile:</label>
                    <input type="text" id="profile" placeholder="e.g., high">
                </div>
                <div class="input-group">
                    <label for="level">Level:</label>
                    <input type="text" id="level" placeholder="e.g., 4.1">
                </div>
                <div class="input-group">
                    <label for="crf">CRF Value:</label>
                    <input type="text" id="crf" placeholder="e.g., 23">
                </div>
                <div class="input-group">
                    <label for="pix_fmt">Pixel Format:</label>
                    <input type="text" id="pix_fmt" placeholder="e.g., yuv420p">
                </div>
                <div class="input-group">
                    <label for="hwaccel">Hardware Acceleration:</label>
                    <input type="text" id="hwaccel" placeholder="e.g., cuda">
                </div>
            </div>
        </div>

        <!-- Audio Parameters -->
        <div class="box">
            <div class="toggle-section" onclick="toggleSection('audio-settings')">Audio Settings ▼</div>
            <div id="audio-settings">
                <div class="dropdown">
                    <label for="acodec">Audio Codec:</label>
                    <select id="acodec">
                        <option value="">None</option>
                        <option value="aac">AAC</option>
                        <option value="libmp3lame">MP3 (libmp3lame)</option>
                        <option value="opus">Opus</option>
                        <option value="flac">FLAC</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="ab">Audio Bitrate:</label>
                    <input type="text" id="ab" placeholder="e.g., 128k">
                </div>
                <div class="input-group">
                    <label for="ar">Audio Sampling Rate:</label>
                    <input type="text" id="ar" placeholder="e.g., 44100">
                </div>
                <div class="input-group">
                    <label for="ac">Audio Channels:</label>
                    <input type="text" id="ac" placeholder="e.g., 2">
                </div>
                <div class="input-group">
                    <label for="vol">Volume Adjustment:</label>
                    <input type="text" id="vol" placeholder="e.g., 256">
                </div>
                <div class="input-group">
                    <label for="af">Audio Filters:</label>
                    <input type="text" id="af" placeholder="e.g., volume=2.0">
                </div>
                <div class="input-group">
                    <label for="filter_complex">Advanced Filters (filter_complex):</label>
                    <input type="text" id="filter_complex" placeholder="e.g., [0:v][1:v]overlay">
                </div>
            </div>
        </div>

        <!-- Resulting script -->
        <textarea id="generated-script" readonly placeholder="Generated batch script will appear here..."></textarea>

        <!-- Output File Suffix -->
        <div class="input-group">
            <label for="suffix">Output File Suffix:</label>
            <input type="text" id="suffix" placeholder="e.g., _customSuffix" value="_reencoded">
        </div>

        <!-- Save and Load buttons -->
        <button id="save-config">Save Configuration</button>
        <button id="load-config">Load Configuration</button>

        <!-- Instructions -->
        <div class="instructions">
            <h3>Mac Instructions:</h3>
            <p>To run the batch script on Mac, open Terminal, navigate to the script's folder, and use <code>sh script_name.sh</code> to execute it.</p>
        </div>
    </div>

    <script>
        const toggleSection = (sectionId) => {
            const section = document.getElementById(sectionId);
            section.classList.toggle('hidden');
        };

        window.onload = () => {
            document.getElementById('video-settings').classList.remove('hidden');
            document.getElementById('audio-settings').classList.remove('hidden');
        };

        const addParameter = (flag, value) => value ? `${flag} ${value}` : '';

        const updateScript = () => {
            const suffixInput = document.getElementById('suffix');
            const crfInput = document.getElementById('crf');
            const pixFmtInput = document.getElementById('pix_fmt');
            const hwaccelInput = document.getElementById('hwaccel');
            const filterComplexInput = document.getElementById('filter_complex');

            const suffix = suffixInput.value || '_reencoded';
            const crf = addParameter('-crf', crfInput.value);
            const pixFmt = addParameter('-pix_fmt', pixFmtInput.value);
            const hwaccel = addParameter('-hwaccel', hwaccelInput.value);
            const filterComplex = addParameter('-filter_complex', filterComplexInput.value);

            const vcodecDropdown = document.getElementById('vcodec');
            const vbInput = document.getElementById('vb');
            const framerateInput = document.getElementById('framerate');
            const vfInput = document.getElementById('vf');
            const aspectInput = document.getElementById('aspect');
            const presetInput = document.getElementById('preset');
            const profileInput = document.getElementById('profile');
            const levelInput = document.getElementById('level');

            const acodecDropdown = document.getElementById('acodec');
            const abInput = document.getElementById('ab');
            const arInput = document.getElementById('ar');
            const acInput = document.getElementById('ac');
            const volInput = document.getElementById('vol');
            const afInput = document.getElementById('af');
            const generatedScript = document.getElementById('generated-script');

            const vcodec = addParameter('-c:v', vcodecDropdown.value);
            const vb = addParameter('-b:v', vbInput.value);
            const framerate = addParameter('-r', framerateInput.value);
            const vf = addParameter('-vf', vfInput.value);
            const aspect = addParameter('-aspect', aspectInput.value);
            const preset = addParameter('-preset', presetInput.value);
            const profile = addParameter('-profile:v', profileInput.value);
            const level = addParameter('-level', levelInput.value);

            const acodec = addParameter('-c:a', acodecDropdown.value);
            const ab = addParameter('-b:a', abInput.value);
            const ar = addParameter('-ar', arInput.value);
            const ac = addParameter('-ac', acInput.value);
            const vol = addParameter('-vol', volInput.value);
            const af = addParameter('-af', afInput.value);

            generatedScript.value = `
@echo off
setlocal enabledelayedexpansion

for %%F in (*.*) do (
    ffmpeg -i "%%F" ${vcodec} ${vb} ${framerate} ${vf} ${aspect} ${preset} ${profile} ${level} ${acodec} ${ab} ${ar} ${ac} ${vol} ${af} ${crf} ${pixFmt} ${hwaccel} ${filterComplex} "%%~nF${suffix}.mp4"
)
            `.trim();
        };

        [document.getElementById('suffix'), document.getElementById('crf'), document.getElementById('pix_fmt'), document.getElementById('hwaccel'), document.getElementById('filter_complex')].forEach(input => {
            input.addEventListener('input', updateScript);
        });
    </script>
</body>
</html>
